#!/bin/bash

lib=$(dirname $0)/../../lib/std.shlib; [ -f ${lib} ] && . ${lib} || { echo "${lib} not found" 1>&2; exit 1; }
lib=$(dirname $0)/lib/$(basename $0).shlib; [ -f ${lib} ] && . ${lib}

function usage()
{
cat <<EOF

Create an Amazon EC2 intance.

Usage:

    em create <instance-name> [instance-name ...]

EOF
exit 0
}

function main()
{
    process-common-arguments $@

    debug "$(basename $0) command line arguments: $@"

    ${help} && usage;

    ec2-run-instances ami-4dbf9e7d \
        --instance-count 1 \
        --key installation_access \
        --group sg-bb3222de \
        --instance-type t2.micro \
         --availability-zone us-west-2b \
        --tenancy default \
        --block-device-mapping /dev/sda1=:10 \
        --subnet subnet-53993c24 \
        --instance-initiated-shutdown-behavior stop \
        --associate-public-ip-address true | jw ec2.grep_instances --list id



}

main $@