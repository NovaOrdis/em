#!/bin/bash

[ -f $(dirname $0)/ec2.shlib ] && . $(dirname $0)/ec2.shlib || { echo "$(dirname $0)/ec2.shlib not found" 1>&2; exit 1; }

function display_help()
{
cat <<EOF

Starts the specified instance.

Usage:

    $(basename $0) <instance-name> [<instance-name> ...]

EOF
}

function main()
{
    process_common_options $@

    [ "${args}" = "" ] && { display_help; exit 1; }

    local name
    for i in ${args}; do
        [ "${name}" = "" ] && name=${i} || fail "currently we only support starting one instance at a time"
    done

    local id=$(ec2-describe-instances | $(dirname $0)/em-java-launcher ${debug_arg} Ec2DescribeInstancesParser --filter name=${name} --list id) || { exit 1; }

    info "starting ${id} ..."

    ec2-start-instances ${id}

}

main $@